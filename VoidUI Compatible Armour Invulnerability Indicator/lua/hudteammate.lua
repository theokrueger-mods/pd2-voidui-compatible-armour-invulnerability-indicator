-- healthbar invulnerability animation
-- credit: Hoppip, DMM for standalone
function HUDTeammate:animate_invulnerability(duration)
    local custom_bar = self._custom_player_panel:child("health_panel"):child("custom_bar")
    if not custom_bar then return end
    custom_bar:animate(
        function(o)
            o:set_color(Color(1, 0.7, 0.85, 1))
            o:set_visible(true)
            over(duration, function(p)
                o:set_h(math.lerp(self._bg_h, 0, p))
                o:set_texture_rect(203, math.lerp(0, 472, p),202,math.lerp(472, 0, p))
                o:set_bottom(self._custom_player_panel:child("health_panel"):child("health_background"):bottom())
            end)
            o:set_visible(false)
        end
    )
end
